# Fleet Tracker MQTT Broker Configuration
# Mosquitto configuration for development environment

# =============================================================================
# General configuration
# =============================================================================

# Run as daemon
daemon false

# Process ID file
pid_file /var/run/mosquitto.pid

# =============================================================================
# Default Listener
# =============================================================================

# Port to use for the default listener
port 1883

# Bind address for the default listener
listener 1883 0.0.0.0

# Maximum number of client connections
max_connections 1000

# =============================================================================
# WebSocket Listener (for browser clients)
# =============================================================================

# WebSocket listener
listener 9001
protocol websockets

# =============================================================================
# Logging
# =============================================================================

# Log destinations
log_dest stdout
log_dest file /mosquitto/log/mosquitto.log

# Log types
log_type error
log_type warning
log_type notice
log_type information
log_type debug

# Connection logging
connection_messages true
log_timestamp true

# =============================================================================
# Security (Development - Permissive)
# =============================================================================

# Allow anonymous connections (dev only)
allow_anonymous true

# Access Control List file
# acl_file /mosquitto/config/acl.conf

# Password file
# password_file /mosquitto/config/passwd

# =============================================================================
# Persistence
# =============================================================================

# Save persistent message data
persistence true
persistence_location /mosquitto/data/

# Autosave interval (seconds)
autosave_interval 1800

# =============================================================================
# Message size limits
# =============================================================================

# Maximum payload size (bytes)
message_size_limit 1024

# =============================================================================
# Quality of Service
# =============================================================================

# Maximum number of QoS 1 and 2 messages to hold for a client
max_queued_messages 1000

# =============================================================================
# Keep Alive
# =============================================================================

# Keep alive multiplier
keepalive_interval 60

# =============================================================================
# Topics & Patterns for Fleet Tracker
# =============================================================================

# Topic patterns:
# fleet/{vehicle_id}/location - GPS location updates
# fleet/{vehicle_id}/status   - Vehicle status updates  
# fleet/{vehicle_id}/alerts   - Vehicle alerts
# fleet/broadcast             - System-wide messages

# Example topic security (uncomment when needed):
# topic write fleet/+/location
# topic read fleet/+/+
# topic read fleet/broadcast
